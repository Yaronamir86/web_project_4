!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t){e(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),e(this,"_handleOverlayClose",(e=>{e.target.classList.contains("modal")&&this.close()})),this._popupElement=document.querySelector(t),this.close=this.close.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("click",this._handleOverlayClose),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("click",this._handleOverlayClose),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.querySelector(".modal__close-btn").addEventListener("click",this.close)}}class s extends t{constructor(e,t){var s,n;super(e),n=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[s]=n,this._formElement=this._popupElement.querySelector(".form"),this._inputList=[...this._formElement.querySelectorAll(".form__input")],this._submitHandler=t}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()})),super.setEventListeners()}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e,t,s){n(this,"_getTemplateClone",(()=>document.querySelector(this._selector).content.querySelector(".element__list-item").cloneNode(!0))),n(this,"_handleLikeIcon",(e=>{e.target.classList.toggle("element__like-btn_active")})),n(this,"_deleteCard",(()=>this._element.remove())),this._text=e.name,this._link=e.link,this._selector=t,this._handleCardclick=s}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteButton.addEventListener("click",this._deleteCard),this._image.addEventListener("click",(e=>this._handleCardclick(e)))}generateCard(){return this._element=this._getTemplateClone(),this._image=this._element.querySelector(".element__photo"),this._image.src=this._link,this._image.alt="A beautiful scene in ".concat(this._text),this._deleteButton=this._element.querySelector(".element__trash-btn"),this._likeButton=this._element.querySelector(".element__like-btn"),this._element.querySelector(".element__title").textContent=this._text,this._setEventListeners(),this._element}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e,t){r(this,"_showInputError",((e,t)=>{const s=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),r(this,"_hideInputError",(e=>{const t=this._form.querySelector(".".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)})),r(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),r(this,"_hasInvalidInputs",(()=>this._inputList.some((e=>!e.validity.valid)))),r(this,"enableButton",(()=>{this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)})),r(this,"_disableButton",(()=>{this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)})),r(this,"_toggleButton",(()=>{this._hasInvalidInputs()?this._disableButton():this.enableButton()})),r(this,"_setEventListeners",(()=>{this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this._toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}resetValidation(){this._disableButton()}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}hideErrors(){this._inputList.forEach((e=>{this._hideInputError(e)}))}}const l=[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],a={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},c=(document.querySelector(".element__list"),document.querySelector(".form_type_profile")),_=document.querySelector(".profile__edit-btn"),u=document.querySelector(".profile__add-btn"),h=document.querySelector(".form__input_type_name"),d=document.querySelector(".form__input_type_about-me"),m=document.querySelector(".form_type_place"),p=new o(a,c),b=new o(a,m);b.enableValidation(),p.enableValidation();const v=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__about"}),f=new s(".modal_type_edit-profile",(e=>{v.setUserInfo(e.name,e["about-me"])}));f.setEventListeners();const y=new s(".modal_type_place",(e=>{g({name:e.Title,link:e["Image link"]})}));y.setEventListeners();const E=new class extends t{constructor(e){super(e),this._imageElemant=this._popupElement.querySelector(".modal__image_type_preview"),this._imageCaption=this._popupElement.querySelector(".modal__title_type_preview")}open(e,t){this._imageElemant.src=e,this._imageElemant.alt="A beautiful view of ".concat(t),this._imageCaption.textContent=t,super.open()}}(".modal_type_preview");E.setEventListeners();const L=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}render(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:l,renderer:e=>g(e)},".element__list");function g(e){const t=function(e){return new i(e,"#card-template",(()=>{E.open(e.link,e.name)})).generateCard(e)}(e);L.addItem(t)}L.render(l),_.addEventListener("click",(()=>{const e=v.getUserInfo();h.value=e.name,d.value=e.job,p.enableButton(),p.hideErrors(),f.open()})),u.addEventListener("click",(()=>{y.open(),b.resetValidation(),b.hideErrors()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLNEgsV0FBYXRILFNBQVNDLGNBQWNnSCxHQUczQ00sU0FFRTdILEtBQUswSCxPQUFPL0YsU0FBU21HLElBQ25COUgsS0FBSzJILFVBQVVHLE1BSW5CQyxRQUFRRCxHQUVOOUgsS0FBSzRILFdBQVdJLFFBQVFGLEtIbUMxQixDQUNFTixNQUFPM0IsRUFDUDRCLFNBQVd2RixHQUFTOEUsRUFBVzlFLElBRWpDLGtCQWFGLFNBQVM4RSxFQUFXOUUsR0FDbEIsTUFBTStGLEVBVFIsU0FBc0IvRixHQUtwQixPQUphLElBQUlELEVBQUtDLEVEekJZLGtCQ3lCZ0IsS0FDaEQrRSxFQUFheEcsS0FBS3lCLEVBQUtVLEtBQU1WLEVBQUtMLFNBRVh1QixhQUFhbEIsR0FLdEJrQixDQUFhbEIsR0FDN0JvRixFQUFlUyxRQUFRRSxHQVp6QlgsRUFBZU8sT0FBT2hDLEdBbUJ0QkUsRUFBa0JwRixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNdUgsRUFBTzVCLEVBQVNLLGNBQ3RCVixFQUFVbkUsTUFBUW9HLEVBQUtyRyxLQUN2QnFFLEVBQVdwRSxNQUFRb0csRUFBS3RCLElBQ3hCUixFQUFrQnRCLGVBQ2xCc0IsRUFBa0JSLGFBQ2xCa0IsRUFBYXJHLFVBR2Z1RixFQUFpQnJGLGlCQUFpQixTQUFTLEtBQ3pDb0csRUFBV3RHLE9BQ1g0RixFQUFxQlgsa0JBQ3JCVyxFQUFxQlQsZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIC8vc3RvcmVzIHRoZSBsb2dpYyBmb3IgY2xvc2luZyB0aGUgcG9wdXAgYnkgcHJlc3NpbmcgdGhlIEVzYyBrZXkuXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vYWRkcyBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBjbG9zZSBpY29uIG9mIHRoZSBwb3B1cC5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvL2NvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyB0aGF0IGRhdGEgYXMgYW4gb2JqZWN0LlxyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBzZWxlY3RvciwgaGFuZGxlQ2FyZGNsaWNrKSB7XHJcbiAgICB0aGlzLl90ZXh0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkY2xpY2sgPSBoYW5kbGVDYXJkY2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGVDbG9uZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlzdC1pdGVtXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfTtcclxuICAvLy8vLy8vLy8vLy9cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1idG5fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9kZWxldGVDYXJkID0gKCkgPT4gdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VJY29uKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2RlbGV0ZUNhcmQpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZGF0YSkgPT4gdGhpcy5faGFuZGxlQ2FyZGNsaWNrKGRhdGEpKTtcclxuICB9XHJcblxyXG4gIFxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGVDbG9uZSgpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fcGhvdG9cIik7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYEEgYmVhdXRpZnVsIHNjZW5lIGluICR7dGhpcy5fdGV4dH1gO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RyYXNoLWJ0blwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idG5cIik7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dHMgPSAoKSA9PlxyXG4gICAgdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gIGVuYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2Rpc2FibGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXRzKCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBoaWRlRXJyb3JzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcGxhY2VzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fdHlwZV9wcm9maWxlXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9hYm91dC1tZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV90eXBlX3BsYWNlXCIpO1xyXG5cclxuXHJcbi8vZXhwb3J0IGNvbnN0IHByb2ZpbGVDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbi8vICBcIi5tb2RhbF9fY2xvc2UtYnRuX3R5cGVfcHJvZmlsZVwiXHJcbi8vKTtcclxuLy9leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbi8vZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dE1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dC1tZVwiKTtcclxuXHJcbi8vZXhwb3J0IGNvbnN0IHBsYWNlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfcGxhY2VcIik7XHJcbi8vZXhwb3J0IGNvbnN0IHBsYWNlQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4vLyAgXCIubW9kYWxfX2Nsb3NlLWJ0bl90eXBlX3BsYWNlXCJcclxuLy8pO1xyXG4vL2NvbnN0IHBsYWNlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbi8vY29uc3QgcGxhY2VMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX2ltYWdlLWxpbmtcIik7XHJcbi8vZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdHlwZV9wcmV2aWV3XCIpO1xyXG4vL2V4cG9ydCBjb25zdCBwcmV2aWV3Q2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gLy8gXCIubW9kYWxfX2Nsb3NlLWJ0bl90eXBlX3ByZXZpZXdcIlxyXG4vLyk7XHJcbi8vZXhwb3J0IGNvbnN0IHByZXZpZXdUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbi8vICBcIi5tb2RhbF9fdGl0bGVfdHlwZV9wcmV2aWV3XCJcclxuLy8pO1xyXG4vL2V4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gLy8gXCIubW9kYWxfX2ltYWdlX3R5cGVfcHJldmlld1wiXHJcbi8vKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcblxyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gIGFkZFByb2ZpbGVCdXR0b24sXHJcbiAgaW5wdXROYW1lLFxyXG4gIGlucHV0VGl0bGUsXHJcbiAgcGxhY2VGb3JtLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcclxuICBzZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vLy8vLy92YWxpZGF0aW9uIC8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUZvcm0pO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcGxhY2VGb3JtKTtcclxuXHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19hYm91dFwiLFxyXG59KTtcclxuXHJcbi8vLy8vL21vZGFsIGluc3RhbnRpYXRpb24vLy8vLy8vLy8vXHJcblxyXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5tb2RhbF90eXBlX2VkaXQtcHJvZmlsZVwiLCAoZGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YVtcImFib3V0LW1lXCJdKTtcclxufSk7XHJcbnByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcGxhY2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLm1vZGFsX3R5cGVfcGxhY2VcIiwgKGRhdGEpID0+IHtcclxuICByZW5kZXJDYXJkKHsgbmFtZTogZGF0YVtcIlRpdGxlXCJdLCBsaW5rOiBkYXRhW1wiSW1hZ2UgbGlua1wiXSB9KTtcclxufSk7XHJcbnBsYWNlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX3ByZXZpZXdcIik7XHJcbnByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8vLy8vLy8vL2NhcmQgY3JlYXRlLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmNvbnN0IHByZXZpZXdTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4gcmVuZGVyQ2FyZChkYXRhKSxcclxuICB9LFxyXG4gIFwiLmVsZW1lbnRfX2xpc3RcIlxyXG4pO1xyXG5cclxucHJldmlld1NlY3Rpb24ucmVuZGVyKGluaXRpYWxDYXJkcyk7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgKCkgPT4ge1xyXG4gICAgcHJldmlld01vZGFsLm9wZW4oZGF0YS5saW5rLCBkYXRhLm5hbWUpO1xyXG4gIH0pO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoZGF0YSk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcclxuICBjb25zdCBlbGVtZW50ID0gZ2VuZXJhdGVDYXJkKGRhdGEpO1xyXG4gIHByZXZpZXdTZWN0aW9uLmFkZEl0ZW0oZWxlbWVudCk7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9FdmVudCBMaXN0ZW5lcnNcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IGluZm8ubmFtZTtcclxuICBpbnB1dFRpdGxlLnZhbHVlID0gaW5mby5qb2I7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlQnV0dG9uKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IuaGlkZUVycm9ycygpO1xyXG4gIHByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBsYWNlTW9kYWwub3BlbigpO1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcnMoKTtcclxufSk7XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1hbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlX3R5cGVfcHJldmlld1wiXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX190aXRsZV90eXBlX3ByZXZpZXdcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2UsIGNhcHRpb24pIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWFudC5zcmMgPSBpbWFnZTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWFudC5hbHQgPSBgQSBiZWF1dGlmdWwgdmlldyBvZiAke2NhcHRpb259YDtcclxuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcHRpb247XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICAvL3JlbmRlcmluZyBhIGxpc3Qgb2YgZWxlbWVudHMgb24gYSBwYWdlXHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vYXJyYXkgb2YgZGF0YSB0byBhZGQgb24gYSBwYWdlIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBjbGFzcy5cclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBhbmQgcmVuZGVyaW5nIGRhdGEgb24gYSBwYWdlLlxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IC8vQ1NTIGNsYXNzIHNlbGVjdG9yIHRvICBhZGQgdGhlIGNhcmQgZWxlbWVudHMuXHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICAvLyBwdWJsaWMgbWV0aG9kIHRoYXQgY3JlYXRlIHRoZSBpdGVtcyBmb3IgcmVuZGVyaW5nLlxyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAvL3B1YmxpYyBtZXRob2QgdGhhdCB0YWtlcyB0aGUgaXRlbXMgYW5kIHJlbmRlciB0aGVtIGludG8gdGhlIGNvbnRhaW5lci5cclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJ0aGlzIiwiY2xvc2UiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiaW5kIiwib3BlbiIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJzdXBlciIsIl9mb3JtRWxlbWVudCIsInJlc2V0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0SGFuZGxlciIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRjbGljayIsIl9zZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl90ZXh0IiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRjbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9kZWxldGVDYXJkIiwiX2ltYWdlIiwiZ2VuZXJhdGVDYXJkIiwiX2dldFRlbXBsYXRlQ2xvbmUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm0iLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfYnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9oYXNJbnZhbGlkSW5wdXRzIiwiX2Rpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJBcnJheSIsImZyb20iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b24iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiaGlkZUVycm9ycyIsImluaXRpYWxDYXJkcyIsInByb2ZpbGVGb3JtIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRQcm9maWxlQnV0dG9uIiwiaW5wdXROYW1lIiwiaW5wdXRUaXRsZSIsInBsYWNlRm9ybSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwicHJvZmlsZU1vZGFsIiwicGxhY2VNb2RhbCIsInJlbmRlckNhcmQiLCJwcmV2aWV3TW9kYWwiLCJfaW1hZ2VFbGVtYW50IiwiX2ltYWdlQ2FwdGlvbiIsImltYWdlIiwiY2FwdGlvbiIsInByZXZpZXdTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlciIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImVsZW1lbnQiLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==